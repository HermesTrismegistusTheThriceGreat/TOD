---
phase: 08-mobile-polish
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/orchestrator_3_stream/frontend/src/components/AlpacaAgentChat.vue
  - apps/orchestrator_3_stream/frontend/src/styles/global.css
autonomous: true

must_haves:
  truths:
    - "Chat input area is usable on mobile (not obscured by keyboard)"
    - "Message bubbles scale to 92-95% width on mobile"
    - "Chat send button meets 44x44px touch target"
    - "Input field has sufficient height for touch typing"
  artifacts:
    - path: "apps/orchestrator_3_stream/frontend/src/components/AlpacaAgentChat.vue"
      provides: "Mobile-optimized chat interface"
      contains: "@media (max-width: 650px)"
    - path: "apps/orchestrator_3_stream/frontend/src/styles/global.css"
      provides: "Global mobile chat input styles"
      contains: "input.*min-height"
  key_links:
    - from: "AlpacaAgentChat.vue"
      to: "global.css"
      via: "CSS variable usage"
      pattern: "var\\(--spacing"
---

<objective>
Make the chat interface fully usable on mobile devices with proper touch targets and viewport handling.

Purpose: Enable comfortable chat interaction on mobile with properly sized inputs, buttons, and message bubbles.
Output: AlpacaAgentChat.vue with enhanced mobile CSS and global.css with mobile input optimizations.
</objective>

<execution_context>
@/Users/muzz/.claude/get-shit-done/workflows/execute-plan.md
@/Users/muzz/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-mobile-polish/08-RESEARCH.md
@apps/orchestrator_3_stream/frontend/src/components/AlpacaAgentChat.vue
@apps/orchestrator_3_stream/frontend/src/components/OrchestratorChat.vue
@apps/orchestrator_3_stream/frontend/src/styles/global.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Enhance AlpacaAgentChat.vue mobile responsiveness</name>
  <files>apps/orchestrator_3_stream/frontend/src/components/AlpacaAgentChat.vue</files>
  <action>
Read AlpacaAgentChat.vue fully to understand the current structure.

The component already has a @media (max-width: 768px) block. Add a more aggressive @media (max-width: 650px) block for smaller mobile phones:

```css
/* Small mobile phones */
@media (max-width: 650px) {
  .alpaca-chat {
    height: 100vh;
    height: 100dvh; /* Dynamic viewport height - accounts for mobile browser chrome */
  }

  .chat-header {
    padding: 0.5rem 0.75rem;
  }

  .header-info h1 {
    font-size: 0.875rem;
  }

  /* Wider message bubbles on small screens */
  .message {
    max-width: 95%;
  }

  .message-content {
    font-size: 0.875rem;
    padding: 0.625rem 0.75rem;
  }

  /* Touch-friendly input area */
  .input-area {
    padding: 0.5rem 0.75rem;
    gap: 0.5rem;
  }

  .chat-input {
    min-height: 44px;
    font-size: 1rem; /* Prevents iOS zoom on focus */
    padding: 0.625rem 0.75rem;
  }

  .send-button {
    min-width: 44px;
    min-height: 44px;
    padding: 0.625rem;
  }

  /* Compact position indicators */
  .position-indicator {
    font-size: 0.7rem;
    padding: 0.25rem 0.5rem;
  }

  /* Scrollable messages area takes remaining space */
  .messages-area {
    flex: 1;
    min-height: 0;
    padding: 0.5rem;
  }
}
```

IMPORTANT: Use `font-size: 1rem` (16px) on input to prevent iOS Safari auto-zoom on focus.
  </action>
  <verify>Run `grep -n "@media (max-width: 650px)" apps/orchestrator_3_stream/frontend/src/components/AlpacaAgentChat.vue` shows the new media query block.</verify>
  <done>AlpacaAgentChat.vue has mobile styles for 650px and below with touch-friendly inputs.</done>
</task>

<task type="auto">
  <name>Task 2: Add global mobile input optimizations</name>
  <files>apps/orchestrator_3_stream/frontend/src/styles/global.css</files>
  <action>
Enhance the existing @media (max-width: 650px) block in global.css with mobile input optimizations:

Add these rules within the existing mobile media query section:

```css
  /* Touch-friendly input fields */
  input,
  textarea {
    min-height: 44px;
    font-size: 1rem; /* Prevents iOS zoom on focus */
  }

  /* Touch-friendly buttons */
  .btn-primary,
  .btn-secondary {
    min-height: 44px;
    padding: 0.75rem 1.25rem;
  }

  /* Ensure all interactive elements have tap highlight */
  button,
  input,
  textarea,
  select,
  a {
    -webkit-tap-highlight-color: rgba(6, 182, 212, 0.2);
  }
```

Also add this outside the media query (general mobile-safe styles):

```css
/* Safe area insets for notched devices (iPhone X+) */
@supports (padding: env(safe-area-inset-bottom)) {
  .input-area,
  .chat-input-area,
  .footer {
    padding-bottom: max(0.75rem, env(safe-area-inset-bottom));
  }
}
```
  </action>
  <verify>Run `grep -n "min-height: 44px" apps/orchestrator_3_stream/frontend/src/styles/global.css` shows input touch target sizing.</verify>
  <done>global.css has mobile input optimizations with iOS zoom prevention and safe area support.</done>
</task>

<task type="auto">
  <name>Task 3: Verify OrchestratorChat.vue mobile completeness</name>
  <files>apps/orchestrator_3_stream/frontend/src/components/OrchestratorChat.vue</files>
  <action>
Read OrchestratorChat.vue to verify it already has mobile styles at 650px.

If the input area lacks 44px touch targets or font-size: 1rem for iOS, add within the existing @media (max-width: 650px) block:

```css
  /* Touch-friendly chat input */
  .chat-input {
    min-height: 44px;
    font-size: 1rem;
  }

  .send-btn {
    min-width: 44px;
    min-height: 44px;
  }
```

If these already exist (or similar), document that OrchestratorChat is already mobile-complete.
  </action>
  <verify>Run `grep -n "font-size: 1rem" apps/orchestrator_3_stream/frontend/src/components/OrchestratorChat.vue` or verify the mobile block addresses input sizing.</verify>
  <done>OrchestratorChat.vue verified or enhanced for mobile input sizing.</done>
</task>

</tasks>

<verification>
1. AlpacaAgentChat.vue has @media (max-width: 650px) with touch-friendly styles
2. global.css has mobile input optimizations
3. Input font-size is 1rem on mobile (prevents iOS zoom)
4. All interactive elements have 44px minimum touch targets
5. No TypeScript/build errors: `cd apps/orchestrator_3_stream/frontend && npm run build` succeeds
</verification>

<success_criteria>
- Chat inputs are at least 44px height on mobile
- Input font-size is 1rem to prevent iOS zoom
- Message bubbles take 92-95% width on mobile
- Send buttons are touch-friendly (44px minimum)
- MOB-03 (chat interface usable on mobile) is addressed
</success_criteria>

<output>
After completion, create `.planning/phases/08-mobile-polish/08-02-SUMMARY.md`
</output>
